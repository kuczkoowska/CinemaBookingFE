@if (movieStore.selectedMovie(); as movie) {

  <div class="relative w-full h-[60vh] min-h-[500px]">

    <div class="absolute inset-0 bg-cover bg-center"
         [style.backgroundImage]="'url(' + movie.posterUrl + ')'">
    </div>

    <div class="absolute inset-0 sm:backdrop-blur-md"></div>
    <div
      class="absolute inset-0 bg-gradient-to-b from-[var(--bg-app)]/60 via-[var(--bg-app)]/80 to-[var(--bg-app)]"></div>

    <div class="container mx-auto px-4 h-full flex items-end pb-16 relative z-10">
      <div class="flex flex-col md:flex-row gap-8 items-end w-full">

        <img [src]="movie.posterUrl"
             [alt]="movie.title"
             class="w-48 md:w-64 rounded-lg shadow-2xl border-4 hidden md:block"
             style="border-color: var(--bg-element)">

        <div class="flex-1">

          <button (click)="goBack()"
                  class="mb-4 text-sm font-bold flex items-center gap-2 transition-colors"
                  style="color: var(--primary-color)"
                  onmouseover="this.style.color='var(--text-main)'"
                  onmouseout="this.style.color='var(--primary-color)'">
            ← WRÓĆ DO REPERTUARU
          </button>

          <h1 class="text-4xl md:text-6xl font-black tracking-tight mb-4"
              style="color: var(--text-main)">
            {{ movie.title }}
          </h1>

          <div class="flex flex-wrap items-center gap-4 text-sm md:text-base font-medium">

            <span class="px-3 py-1 rounded-full border"
                  style="background-color: var(--bg-element); border-color: var(--border-color); color: var(--text-main)">
              {{ movie.genre | genreName }}
            </span>

            <span style="color: var(--text-muted)">{{ movie.durationMinutes }} min</span>
            <span style="color: var(--text-muted)">•</span>
            <span style="color: var(--text-muted)">{{ movie.director }}</span>
            <span style="color: var(--text-muted)">•</span>

            <span class="px-2 py-0.5 rounded text-xs font-bold"
                  style="background-color: var(--primary-color); color: white;">
              {{ movie.ageRating }}+
            </span>
          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="container mx-auto px-4 py-12 grid grid-cols-1 lg:grid-cols-[2fr_1fr] gap-12">
    <app-movie-description [movie]="movie"/>
    <app-screening-dates [screenings]="screeningStore.screenings()" (screeningSelect)="handleScreeningSelect($event)"/>
  </div>

} @else if (movieStore.isLoading()) {
  <div class="container mx-auto py-20 text-center">
    <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 mx-auto mb-4"
         style="border-color: var(--primary-color)"></div>
    <p class="text-xl" style="color: var(--text-main)">Szukanie filmu...</p>
  </div>
} @else {
  <div class="font-bold p-10 text-center" style="color: var(--primary-color)">
    Nie znaleziono filmu o podanym ID.
    {{ movieStore.error() }}
  </div>
}
